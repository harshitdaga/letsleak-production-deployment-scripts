{"version":3,"file":"/packages/alethes:pages.js","sources":["alethes:pages/lib/pages.coffee"],"names":[],"mappings":"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","sourcesContent":["@__Pages = class Pages\n  settings:\n    #settingName: [canBeMadeAvailableToTheClient, expectedTypes(s), defaultValue]\n    dataMargin: [true, Number, 3]\n    divWrapper: [true, Match.Optional(String), \"pagesCont\"] #If defined, should be a name of the wrapper's CSS classname\n    fields: [true, Object, {}]\n    filters: [true, Object, {}]\n    itemTemplate: [true, String, \"_pagesItemDefault\"]\n    navShowEdges: [true, Boolean, false] #If true, overrides navShowFirst and navShowLast\n    navShowFirst: [true, Boolean, true] #If true, overrides navShowEdges\n    navShowLast: [true, Boolean, true] #If true, overrides navShowEdges\n    resetOnReload: [true, Boolean, false]\n    paginationMargin: [true, Number, 3]\n    perPage: [true, Number, 10]\n    #requestTimeout: [true, Number, 2]\n    route: [true, String, \"/page/\"]\n    router: [true, Match.Optional(String), undefined] #Can be any type. Use only in comparisons. Expects String or Boolean\n    routerTemplate: [true, String, \"pages\"]\n    routerLayout: [true, Match.Optional(String), undefined]\n    sort: [true, Object, {}]\n    #Unavailable to the client after initialization\n    auth: [false, Match.Optional(Function), undefined]\n    availableSettings: [false, Object, {}]\n    fastRender: [false, Boolean, false]\n    homeRoute: [false, Match.OneOf(String, Array, Boolean), \"/\"]\n    infinite: [false, Boolean, false]\n    infiniteItemsLimit: [false, Number, Infinity]\n    infiniteTrigger: [false, Number, .9]\n    infiniteRateLimit: [false, Number, 1]\n    navTemplate: [false, String, \"_pagesNavCont\"]\n    onDeniedSetting: [false, Function, (k, v, e) -> console?.log \"Changing #{k} not allowed.\"]\n    pageSizeLimit: [false, Number, 60]\n    pageTemplate: [false, String, \"_pagesPageCont\"]\n    rateLimit: [false, Number, 1]\n    routeSettings: [false, Match.Optional(Function), undefined]\n    table: [false, Match.OneOf(Boolean, Object), false]\n    tableItemTemplate: [false, String, \"_pagesTableItem\"]\n    tableTemplate: [false, String, \"_pagesTable\"]\n    templateName: [false, Match.Optional(String), undefined] #Defaults to collection name\n  _ninstances: 0\n  _currentPage: 1\n  collections: {}\n  init: true\n  instances: {}\n  subscriptions: []\n  userSettings: {}\n  methods:\n    \"CountPages\": (sub) ->\n      n = sub.get \"nPublishedPages\"\n      return n  if n?\n\n      n = Math.ceil @Collection.find(\n        $and: [\n          sub.get(\"filters\"),\n          sub.get(\"realFilters\") or {}\n        ]\n      ).count() / (sub.get \"perPage\")\n      n or 1\n    \"Set\": (k, v, sub) ->\n      check k, String\n      check v, @settings[k][1]\n      check sub, Match.Where (sub) ->\n        sub.connection?.id?\n      return 0  if @valuesEqual(@get(k, sub.connection.id), v)\n      if !@availableSettings[k] or (_.isFunction(@availableSettings[k]) and !@availableSettings[k] v, sub)\n        @error 4002, \"Changing #{k} not allowed.\"\n      changes = 0\n      if v?\n        changes = @_set k, v, cid: sub.connection.id + @name\n      else if !_.isString k\n        for _k, _v of k\n          changes += @set _k, _v, cid: sub.connection.id + @name\n      changes\n    \"Unsubscribe\": ->\n      subs = []\n      for i, k in @subscriptions\n        if i.connection.id is arguments[arguments.length - 1].connection.id\n          i.stop()\n        else\n          subs.push i\n      @subscriptions = subs\n      true\n  constructor: (collection, settings = {}) ->\n    unless @ instanceof Meteor.Pagination\n      @error 4000, \"The Meteor.Pagination instance has to be initiated with `new`\"\n    @setCollection collection\n    @set settings, init: true\n    @setDefaults()\n    @setRouter()\n    @[(if Meteor.isServer then \"server\" else \"client\") + \"Init\"]()\n    @registerInstance()\n    @\n  error: (code, msg) ->\n    msg = code  if !code?\n    throw new Meteor.Error code, msg\n  serverInit: ->\n    @setMethods()\n    self = @\n    Meteor.onConnection (connection) =>\n      connection.onClose =>\n        delete @userSettings[connection.id]\n    Meteor.publish @name, (page) ->\n      self.publish.call self, page, @\n  clientInit: ->\n    @requested = {}\n    @received = {}\n    @queue = []\n    @setTemplates()\n    @countPages()\n    Tracker.autorun =>\n      Meteor.userId?()\n      @reload()\n    @setInfiniteTrigger()  if @infinite\n  reload: ->\n    @unsubscribe =>\n      delete @initPage\n      @requested = {}\n      @received = {}\n      @queue = []\n      @call \"CountPages\", (e, total) =>\n        @sess \"totalPages\", total\n        p = @currentPage()\n        p = 1  if (not p?) or @resetOnReload or p > total\n        @sess \"currentPage\", false\n        @sess \"currentPage\", p\n  unsubscribe: (cb) ->\n    @call \"Unsubscribe\", =>\n      cb()  if cb?\n  setDefaults: ->\n    for k, v of @settings\n      @[k] ?= v[2]  if v[2]?\n  syncSettings: (cb) ->\n    S = {}\n    for k, v of @settings\n      if v[0]\n        S[k] = @[k]\n    @set S, if cb? then {cb: cb.bind(@)} else null\n  setMethods: ->\n    nm = {}\n    self = @\n    for n, f of @methods\n      nm[@id + n] = ((f) ->\n        ->\n          arg = []\n          for k, v of arguments\n            arg[k] = v\n          arg.push @\n          @get = ((self, k) -> self.get k, @connection.id).bind @, self\n          r = f.apply self, arg\n          r\n      )(f)\n    @methods = nm\n    Meteor.methods @methods\n  getMethodName: (name) ->\n    @id + name\n  call: (args...) ->\n    check args, Array\n    if args.length < 1\n      @error 4001, \"Method name not provided in a method call.\"\n    args[0] = @getMethodName args[0]\n    last = args.length - 1\n    if _.isFunction args[last]\n      args[last] = args[last].bind @\n    Meteor.call.apply @, args\n  sess: (k, v) ->\n    return  if !Session?\n    k = \"#{@id}.#{k}\"\n    if v?\n      Session.set k, v\n    else\n      Session.get k\n  get: (setting, connectionId) ->\n    @userSettings[connectionId]?[setting] ? @[setting]\n  set: (k, opts...) ->\n    ch = 0\n    switch opts.length\n      when 0\n        if _.isObject k\n          for _k, _v of k\n            ch += @_set _k, _v\n      when 1\n        if _.isObject k\n          if _.isFunction opts[0]\n            opts[0] = cb: opts[0]\n          for _k, _v of k\n            ch += @_set _k, _v, opts[0]\n        else\n          check k, String\n          ch = @_set k, opts[0]\n      when 2\n        if _.isFunction opts[1]\n          opts[1] = cb: opts[1]\n        ch = @_set k, opts[0], opts[1]\n      when 3\n        check opts[1], Object\n        check opts[2], Function\n        opts[2] = cb: opts[2]\n        ch = @_set k, opts[1], opts[2]\n    if Meteor.isClient and ch\n      @reload()\n    ch\n  _set: (k, v, opts = {}) ->\n    check k, String\n    ch = 0\n    if Meteor.isServer or !@[k]? or @settings[k]?[0] or opts.init\n      if @settings[k]?[1]? and @settings[k]?[1] isnt true\n        check v, @settings[k][1]\n      oldV = @get(k, opts?.cid)\n      if !@valuesEqual(oldV, v)\n        @[k] = v\n        ch = 1\n      if Meteor.isClient and !opts.init\n        @call \"Set\", k, v, (e, r) ->\n          if e\n            @[k] = oldV\n            return @onDeniedSetting.call @, k, v, e\n          opts.cb? ch\n      else\n        if opts.cid\n          if ch\n            @userSettings[opts.cid] ?= {}\n            @userSettings[opts.cid][k] = v\n        else\n          @[k] = v\n        opts.cb? ch\n    else\n      @onDeniedSetting.call @, k, v\n    ch\n  valuesEqual: (v1, v2) ->\n    EJSON.equals(v1, v2) or (_.isFunction(v1) and _.isFunction(v2) and v1.toString() is v2.toString())\n  setId: (name) ->\n    if @templateName\n      name = @templateName\n    while name of Pages::instances\n      n = name.match /[0-9]+$/\n      if n?\n        name = name[0 ... name.length - n[0].length] + (parseInt(n) + 1)\n      else\n        name = name + \"2\"\n    @id = \"pages_\" + name\n    @name = name\n  registerInstance: ->\n    Pages::_ninstances++\n    Pages::instances[@name] = @\n  setCollection: (collection) ->\n    if typeof collection is 'object'\n      Pages::collections[collection._name] = collection\n      @Collection = collection\n    else\n      isNew = true\n      try\n        @Collection = new Mongo.Collection collection\n        Pages::collections[@name] = @Collection\n      catch e\n        isNew = false\n        @Collection = Pages::collections[@name]\n        @Collection instanceof Mongo.Collection or throw \"The '#{collection}' collection \n        was created outside of <Meteor.Pagination>. Pass the collection object\n        instead of the collection's name to the <Meteor.Pagination> constructor.\"\n    @setId @Collection._name\n    @PaginatedCollection = new Mongo.Collection @id\n  linkTo: (page)->\n    if Router.current()?.params\n      params = Router.current().params\n      params.page = page\n      Router.routes[\"#{@name}_page\"].path params\n  setRouter: ->\n    if @router is \"iron-router\"\n      if @route.indexOf(\":page\") is -1\n        if @route[0] isnt \"/\"\n          @route = \"/\" + @route\n        if @route[@route.length - 1] isnt \"/\"\n          @route += \"/\"\n        pr = @route = \"#{@route}:page\"\n      t = @routerTemplate\n      l = @routerLayout ? undefined\n      self = @\n      init = true\n      Router.map ->\n        unless self.infinite\n          @route \"#{self.name}_page\",\n            path: pr\n            template: t\n            layoutTemplate: l\n            onBeforeAction: ->\n              page = parseInt @params.page\n              if self.init\n                self.sess \"oldPage\", page\n                self.sess \"currentPage\", page\n              if self.routeSettings?\n                self.routeSettings @\n              Tracker.nonreactive =>\n                self.onNavClick page\n              @next()\n        if self.homeRoute\n          if _.isString self.homeRoute\n            self.homeRoute = [self.homeRoute]\n          for hr, k in self.homeRoute\n            @route \"#{self.name}_home#{k}\",\n              path: hr\n              template: t\n              layoutTemplate: l\n              onBeforeAction: ->\n                if self.routeSettings?\n                  self.routeSettings @\n                if self.init\n                  self.sess \"oldPage\", 1\n                  self.sess \"currentPage\", 1\n                @next()\n      if Meteor.isServer and @fastRender\n        self = @\n        FastRender.route pr, (params) ->\n          @subscribe self.name, parseInt params.page\n        FastRender.route @homeRoute, ->\n          @subscribe self.name, 1    \n  setPerPage: ->\n    @perPage = if @pageSizeLimit < @perPage then @pageSizeLimit else @perPage\n  setTemplates: ->\n    name = @templateName or @name\n    if @table and @itemTemplate is \"_pagesItemDefault\"\n      @itemTemplate = @tableItemTemplate\n    for i in [@navTemplate, @pageTemplate, @itemTemplate, @tableTemplate]\n      tn = @id + i\n      Template[tn] = new Blaze.Template \"Template.#{tn}\", Template[i].renderFunction\n      Template[tn].helpers _TemplateHelpers[i]\n      Template[tn].events _TemplateEvents[i]\n      Template[tn].helpers pagesData: @\n    Template[name].helpers\n      pagesData: @\n      pagesNav: Template[@id + @navTemplate]\n      pages: Template[@id + @pageTemplate]\n  countPages: _.throttle ->\n      @call \"CountPages\", ((e, r) ->\n        @sess \"totalPages\", r\n        if @sess(\"currentPage\") > r\n          @sess \"currentPage\", 1\n      ).bind(@)\n    , 500\n  publishNone: ->\n    @ready()\n    return @Collection.find null\n  publish: (page, sub) ->\n    check page, Number\n    check sub, Match.Where (s) ->\n      s.ready?\n    cid = sub.connection.id\n    get = sub.get = ((cid, k) -> @get k, cid).bind(@, cid)\n    set = sub.set = ((cid, k, v) -> @set k, v, cid: cid).bind(@, cid)\n    delete @userSettings[cid]?.realFilters\n    delete @userSettings[cid]?.nPublishedPages\n    @setPerPage()\n    skip = (page - 1) * get \"perPage\"\n    skip = 0  if skip < 0\n    filters = get \"filters\"\n    options = \n      sort: get \"sort\"\n      fields: get \"fields\"\n      skip: skip\n      limit: get \"perPage\"\n    if @auth?\n      r = @auth.call @, skip, sub\n      if !r\n        set \"nPublishedPages\", 0\n        return @publishNone()\n      else if _.isNumber r\n        set \"nPublishedPages\", r\n        return @publishNone()  if page > r\n      else if _.isArray(r) and r.length is 2\n        if _.isFunction r[0].fetch\n          c = r\n        else\n          filters = r[0]\n          options = r[1]\n      else if _.isFunction r.fetch\n        c = r\n    if !EJSON.equals({}, filters) and !EJSON.equals(get(\"filters\"), filters)\n      set \"realFilters\", filters\n    c ?= @Collection.find filters, options\n    init = true\n    self = @\n    handle = c.observe\n      addedAt: ((sub, doc, at) ->\n        try\n          doc[\"_#{@id}_p\"] = page\n          doc[\"_#{@id}_i\"] = at\n          id = doc._id\n          delete doc._id\n          unless init\n            #Add to @PaginatedCollection\n            sub.added(@id, id, doc)\n            (@Collection.find get \"filters\",\n              sort: get \"sort\"\n              fields: get \"fields\"\n              skip: skip\n              limit: get \"perPage\"\n            ).forEach (o, i) =>\n              if i >= at\n                sub.changed(@id, o._id, _.object([[\"_#{@id}_i\", i + 1]]))\n        catch e\n      ).bind @, sub\n    handle2 = c.observeChanges\n      movedBefore: ((sub, id, before) ->\n        ref = false\n        (@Collection.find get \"filters\",\n          sort: get \"sort\"\n          fields: get \"fields\"\n          skip: skip\n          limit: get \"perPage\"\n        ).forEach (o, i) =>\n          if !ref and o._id is before\n            ref = true\n            at = i\n          if ref\n            sub.changed(@id, o._id, _.object([[\"_#{@id}_i\", i + 1]]))\n          sub.changed(@id, id, _.object([[\"_#{@id}_i\", i]]))\n        #Change in @PaginatedCollection\n      ).bind @, sub\n      changed: ((sub, id, fields) ->\n        try\n          #Change in @PaginatedCollection\n          sub.changed @id, id, fields\n        catch e\n      ).bind @, sub\n      removed: ((sub, id) ->\n        try\n          #Remove from @PaginatedCollection\n          sub.removed @id, id\n        catch e\n      ).bind @, sub\n    n = 0\n    c.forEach ((doc, index, cursor) ->\n      n++\n      doc[\"_#{@id}_p\"] = page\n      doc[\"_#{@id}_i\"] = index\n      #Initial add to @PaginatedCollection\n      sub.added @id, doc._id, doc\n    ).bind @\n    init = false\n    sub.onStop ->\n      handle.stop()\n      handle2.stop()\n    @ready()\n    @subscriptions.push sub\n    c\n  loading: (p) ->\n    if !@fastRender and p is @currentPage()\n      @sess \"ready\", false\n  now: ->\n    (new Date()).getTime()\n  log: (msg) ->\n    console.log \"#{@name} #{msg}\"\n  logRequest: (p) ->\n    @timeLastRequest = @now()\n    @requesting = p\n    @requested[p] = 1\n  logResponse: (p) ->\n    delete @requested[p]\n    @received[p] = 1\n  clearQueue: ->\n    @queue = []\n  neighbors: (page) ->\n    @n = []\n    if @dataMargin is 0\n      return @n\n    for d in [1 .. @dataMargin]\n      np = page + d\n      if np <= @sess \"totalPages\"\n        @n.push np\n      pp = page - d\n      if pp > 0\n        @n.push pp\n    @n\n  queueNeighbors: (page) ->\n    for p in @neighbors page\n      @queue.push p  if !@received[p] and !@requested[p]\n  paginationNavItem: (label, page, disabled, active = false) ->\n    p: label\n    n: page\n    active: if active then \"active\" else \"\"\n    disabled: if disabled then \"disabled\" else \"\"\n  paginationNeighbors: ->\n    page = @currentPage()\n    total = @sess \"totalPages\"\n    from = page - @paginationMargin\n    to = page + @paginationMargin\n    if from < 1\n        to += 1 - from\n        from = 1\n    if to > total\n        from -= to - total\n        to = total\n    from = 1 if from < 1\n    to = total if to > total\n    n = []\n    if @navShowFirst or @navShowEdges\n      n.push @paginationNavItem \"«\", 1, page == 1\n    n.push @paginationNavItem \"<\", page - 1, page == 1\n    for p in [from .. to]\n      n.push @paginationNavItem p, p, page > total, p is page\n    n.push @paginationNavItem \">\", page + 1, page >= total\n    if @navShowLast or @navShowEdges\n      n.push @paginationNavItem \"»\", total, page >= total\n    for i, k in n\n      n[k]['_p'] = @\n    n\n  onNavClick: (n) ->\n    if n <= @sess(\"totalPages\") and n > 0\n      Deps.nonreactive =>\n        cp = @sess \"currentPage\"\n        if @received[cp]\n          @sess \"oldPage\", cp\n      @sess \"currentPage\", n\n  setInfiniteTrigger: ->\n    window.onscroll = (_.throttle ->\n      t = @infiniteTrigger\n      oh = document.body.offsetHeight\n      if t > 1\n        l = oh - t\n      else if t > 0\n        l = oh * t\n      else\n        return\n      if (window.innerHeight + window.scrollY) >= l\n        if @lastPage < @sess \"totalPages\"\n          @sess(\"currentPage\", @lastPage + 1)\n    , @infiniteRateLimit * 1000\n    ).bind @\n  checkQueue: _.throttle ->\n    cp = @currentPage()\n    neighbors = @neighbors cp\n    if !@received[cp]\n      @clearQueue()\n      @requestPage cp\n      cp = String cp\n      for k, v of @requested\n        if k isnt cp\n          if @subscriptions[k]?\n            @subscriptions[k].stop()\n            delete @subscriptions[k]\n          delete @requested[k]\n    else if @queue.length\n      while @queue.length > 0\n        i = @queue.shift()\n        if i in neighbors\n          @requestPage i\n          break\n  , 500\n  currentPage: ->\n    if Meteor.isClient and @sess(\"currentPage\")?\n      @sess \"currentPage\"\n    else\n      @_currentPage\n  isReady: ->\n    @sess \"ready\"\n  ready: (p) ->\n    if p is true or p is @currentPage() and Session?\n      @sess \"ready\", true\n  checkInitPage: ->\n    if @init \n      if @router\n        Router.current()?.route?.getName()\n        try\n          @initPage = parseInt(Router.current().route.params(location.href)?.page) or 1\n          @init = false\n        catch\n          return\n      else\n        @initPage = 1\n        @init = false    \n    @sess \"oldPage\", @initPage\n    @sess \"currentPage\", @initPage\n  getPage: (page) ->\n    if Meteor.isClient\n      page = @currentPage()  unless page?\n      page = parseInt page\n      return  if page is NaN\n      total = @sess \"totalPages\"\n      return @ready true  if total is 0\n      if page <= total\n        @requestPage page\n        @queueNeighbors page\n        @checkQueue()\n      if @infinite\n        n = @PaginatedCollection.find({},\n          fields: @fields\n          sort: @sort\n        ).count()\n        c = @PaginatedCollection.find({},\n          fields: @fields\n          sort: @sort\n          skip: if @infiniteItemsLimit isnt Infinity and n > @infiniteItemsLimit then n - @infiniteItemsLimit else 0\n          limit: @infiniteItemsLimit\n        )\n      else\n        c = @PaginatedCollection.find(\n          _.object([\n            [\"_#{@id}_p\", page]\n          ]),\n          fields: @fields\n          sort: _.object([\n            [\"_#{@id}_i\", 1]\n          ])\n        )\n        c.observeChanges\n          added: =>\n            @countPages()\n          removed: =>\n            @countPages()\n      c.fetch()\n  requestPage: (page) ->\n    #if page not in @received\n    #  @loading page\n    return  if !page or @requested[page] or @received[page]\n    #@clearQueue()  if page is @currentPage()\n    #@queue.push page\n    @logRequest page\n    Meteor.defer ((page) ->\n      @subscriptions[page] = Meteor.subscribe @name, page,\n        onReady: ((page) ->\n          @onPage page\n        ).bind @, page\n        onError: (e) =>\n          @error e.message\n    ).bind @, page\n  onPage: (page) ->\n    @logResponse page\n    @ready page\n    if @infinite\n      @lastPage = page\n    @countPages()\n    @checkQueue()\n\n\n\nMeteor.Pagination = Pages"]}